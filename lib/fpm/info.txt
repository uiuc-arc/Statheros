forked from https://github.com/MikeLankamp/fpm/commit/8ac4bd956242a831a8baaae0e7822a0a3fb01e29
